import{a as z,b as s,c as M,d as P,f as V,h as R,i as G,j as $,k as L,l as Z}from"./chunk-JNGAKWPD.js";import{a as H}from"./chunk-J3JAV6PN.js";import{$ as n,B as N,Ba as D,C as E,Ca as q,Da as j,H as O,I as T,Ia as w,Na as x,O as c,P as C,V as p,X as a,_ as i,aa as f,ba as A,c as F,ca as B,da as h,ka as l,s as k,w as I,x as g,z as S}from"./chunk-BCLHCJ64.js";var U=(()=>{let t=class t{constructor(u){this.http=u}createOrder(u){return this.http.post(H.apiURL+"order-tea",u)}};t.\u0275fac=function(r){return new(r||t)(S(j))},t.\u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Q(e,t){e&1&&(i(0,"div",32),l(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F "),n())}function W(e,t){e&1&&(i(0,"div",32),l(1," \u0418\u043C\u044F \u043C\u043E\u0436\u0435\u0442 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E \u0431\u0443\u043A\u0432\u044B "),n())}function X(e,t){if(e&1&&(i(0,"div"),p(1,Q,2,0,"div",22)(2,W,2,0,"div",22),n()),e&2){let o,u,r=h(2);c(),a("ngIf",(o=r.checkoutForm.get("name"))==null||o.errors==null?null:o.errors.required),c(),a("ngIf",(u=r.checkoutForm.get("name"))==null||u.errors==null?null:u.errors.pattern)}}function Y(e,t){e&1&&(i(0,"div",32),l(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043C\u0438\u043B\u0438\u044E "),n())}function ee(e,t){e&1&&(i(0,"div",32),l(1," \u0424\u0430\u043C\u0438\u043B\u0438\u044F \u043C\u043E\u0436\u0435\u0442 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0442\u043E\u043B\u044C\u043A\u043E \u0431\u0443\u043A\u0432\u044B "),n())}function te(e,t){if(e&1&&(i(0,"div"),p(1,Y,2,0,"div",22)(2,ee,2,0,"div",22),n()),e&2){let o,u,r=h(2);c(),a("ngIf",(o=r.checkoutForm.get("lastName"))==null||o.errors==null?null:o.errors.required),c(),a("ngIf",(u=r.checkoutForm.get("lastName"))==null||u.errors==null?null:u.errors.pattern)}}function ue(e,t){e&1&&(i(0,"div",32),l(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043B\u0435\u0444\u043E\u043D "),n())}function re(e,t){e&1&&(i(0,"div",32),l(1," \u0422\u0435\u043B\u0435\u0444\u043E\u043D \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C 11 \u0446\u0438\u0444\u0440 "),n())}function ne(e,t){if(e&1&&(i(0,"div"),p(1,ue,2,0,"div",22)(2,re,2,0,"div",22),n()),e&2){let o,u,r=h(2);c(),a("ngIf",(o=r.checkoutForm.get("phone"))==null||o.errors==null?null:o.errors.required),c(),a("ngIf",(u=r.checkoutForm.get("phone"))==null||u.errors==null?null:u.errors.pattern)}}function ie(e,t){e&1&&(i(0,"div",32),l(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043D\u0443 "),n())}function oe(e,t){e&1&&(i(0,"div",32),l(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043D\u0434\u0435\u043A\u0441 "),n())}function le(e,t){e&1&&(i(0,"div",32),l(1," \u0418\u043D\u0434\u0435\u043A\u0441 \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C 6 \u0446\u0438\u0444\u0440 "),n())}function me(e,t){if(e&1&&(i(0,"div"),p(1,oe,2,0,"div",22)(2,le,2,0,"div",22),n()),e&2){let o,u,r=h(2);c(),a("ngIf",(o=r.checkoutForm.get("zip"))==null||o.errors==null?null:o.errors.required),c(),a("ngIf",(u=r.checkoutForm.get("zip"))==null||u.errors==null?null:u.errors.pattern)}}function ae(e,t){e&1&&(i(0,"div",32),l(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441 "),n())}function ce(e,t){e&1&&(i(0,"div",32),l(1," \u0410\u0434\u0440\u0435\u0441 \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C: \u0431\u0443\u043A\u0432\u044B, \u0446\u0438\u0444\u0440\u044B, \u043F\u0440\u043E\u0431\u0435\u043B\u044B, \u0434\u0435\u0444\u0438\u0441 \u0438 \u0441\u043B\u0435\u0448 "),n())}function de(e,t){if(e&1&&(i(0,"div"),p(1,ae,2,0,"div",22)(2,ce,2,0,"div",22),n()),e&2){let o,u,r=h(2);c(),a("ngIf",(o=r.checkoutForm.get("address"))==null||o.errors==null?null:o.errors.required),c(),a("ngIf",(u=r.checkoutForm.get("address"))==null||u.errors==null?null:u.errors.pattern)}}function pe(e,t){e&1&&(i(0,"div",33),l(1," \u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437. "),n())}function se(e,t){if(e&1){let o=A();i(0,"form",6)(1,"div",7)(2,"div",8)(3,"label",9),l(4,"\u0422\u043E\u0432\u0430\u0440"),n(),f(5,"input",10),n(),i(6,"div",11)(7,"label",12),l(8,"\u0418\u043C\u044F"),n(),f(9,"input",13),p(10,X,3,2,"div",14),n(),i(11,"div",11)(12,"label",15),l(13,"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"),n(),f(14,"input",16),p(15,te,3,2,"div",14),n(),i(16,"div",11)(17,"label",17),l(18,"\u0422\u0435\u043B\u0435\u0444\u043E\u043D"),n(),f(19,"input",18),p(20,ne,3,2,"div",14),n(),i(21,"div",19)(22,"label",20),l(23,"\u0421\u0442\u0440\u0430\u043D\u0430"),n(),f(24,"input",21),p(25,ie,2,0,"div",22),n(),i(26,"div",19)(27,"label",23),l(28,"\u0418\u043D\u0434\u0435\u043A\u0441"),n(),f(29,"input",24),p(30,me,3,2,"div",14),n(),i(31,"div",8)(32,"label",25),l(33,"\u0410\u0434\u0440\u0435\u0441"),n(),f(34,"input",26),p(35,de,3,2,"div",14),n(),i(36,"div",8)(37,"label",27),l(38,"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u043A \u0437\u0430\u043A\u0430\u0437\u0443"),n(),f(39,"textarea",28),n(),i(40,"div",29)(41,"button",30),B("click",function(){O(o);let r=h();return T(r.createOrder())}),l(42,"\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C"),n(),p(43,pe,2,0,"div",31),n()()()}if(e&2){let o,u,r,d,_,v,m=h();a("formGroup",m.checkoutForm),c(10),a("ngIf",((o=m.checkoutForm.get("name"))==null?null:o.invalid)&&(((o=m.checkoutForm.get("name"))==null?null:o.touched)||((o=m.checkoutForm.get("name"))==null?null:o.dirty))),c(5),a("ngIf",((u=m.checkoutForm.get("lastName"))==null?null:u.invalid)&&(((u=m.checkoutForm.get("lastName"))==null?null:u.touched)||((u=m.checkoutForm.get("lastName"))==null?null:u.dirty))),c(5),a("ngIf",((r=m.checkoutForm.get("phone"))==null?null:r.invalid)&&(((r=m.checkoutForm.get("phone"))==null?null:r.touched)||((r=m.checkoutForm.get("phone"))==null?null:r.dirty))),c(5),a("ngIf",((d=m.checkoutForm.get("country"))==null?null:d.invalid)&&(((d=m.checkoutForm.get("country"))==null?null:d.touched)||((d=m.checkoutForm.get("country"))==null?null:d.dirty))&&((d=m.checkoutForm.get("country"))==null||d.errors==null?null:d.errors.required)),c(5),a("ngIf",((_=m.checkoutForm.get("zip"))==null?null:_.invalid)&&(((_=m.checkoutForm.get("zip"))==null?null:_.touched)||((_=m.checkoutForm.get("zip"))==null?null:_.dirty))),c(5),a("ngIf",((v=m.checkoutForm.get("address"))==null?null:v.invalid)&&(((v=m.checkoutForm.get("address"))==null?null:v.touched)||((v=m.checkoutForm.get("address"))==null?null:v.dirty))),c(6),a("disabled",m.disabled),c(2),a("ngIf",!m.isSuccess&&m.hasError)}}function fe(e,t){e&1&&(i(0,"div",34),l(1," \u0421\u043F\u0430\u0441\u0438\u0431\u043E \u0437\u0430 \u0437\u0430\u043A\u0430\u0437! "),n())}var J=(()=>{let t=class t{constructor(u,r,d){this.fb=u,this.activatedRoute=r,this.orderService=d,this.checkoutForm=this.fb.group({product:[{value:"",disabled:!0}],name:["",[s.required,s.pattern("^[A-Za-z\u0410-\u042F\u0401\u0430-\u044F\u0451]+$")]],lastName:["",[s.required,s.pattern("^[A-Za-z\u0410-\u042F\u0401\u0430-\u044F\u0451]+$")]],phone:["",[s.required,s.pattern("^\\+?\\d{11}$")]],country:["",[s.required]],zip:["",[s.required,s.pattern("^[\\d]{6}$")]],address:["",[s.required,s.pattern("^[A-Za-z\u0410-\u042F\u0401\u0430-\u044F\u0451\\s\\-\\/\\d]+$")]],comment:[""]}),this.subscription=null,this.subscriptionError=null,this.isSuccess=!1,this.hasError=!1,this.disabled=!1,this.observable=new F(_=>{let v=setTimeout(()=>{_.next(!1)},3e3);return{unsubscribe(){clearTimeout(v)}}})}ngOnInit(){this.subscription=this.activatedRoute.queryParams.subscribe(u=>{u.product&&this.checkoutForm.patchValue({product:u.product})})}ngOnDestroy(){this.subscription?.unsubscribe(),this.subscriptionError?.unsubscribe()}createOrder(){if(!this.checkoutForm.invalid){let u={name:this.checkoutForm.get("name").value,last_name:this.checkoutForm.get("lastName").value,phone:this.checkoutForm.get("phone").value,country:this.checkoutForm.get("country").value,zip:this.checkoutForm.get("zip").value,product:this.checkoutForm.get("product").value,address:this.checkoutForm.get("address").value,comment:this.checkoutForm.get("comment").value};this.disabled=!0,this.orderService.createOrder(u).pipe(k(()=>{this.disabled=!1})).subscribe(r=>{r.success&&!r.message?(this.isSuccess=!0,this.hasError=!1):(this.isSuccess=!1,this.hasError=!0,this.subscriptionError=this.observable.subscribe(d=>this.hasError=d))})}}};t.\u0275fac=function(r){return new(r||t)(C($),C(w),C(U))},t.\u0275cmp=N({type:t,selectors:[["app-order"]],decls:7,vars:2,consts:[[1,"order","py-4"],[1,"container"],["id","order-title",1,"fw-bold","text-center","mb-5"],[1,"row","justify-content-center"],["class","col-lg-7","id","form","novalidate","",3,"formGroup",4,"ngIf"],["class","text-center fs-3","id","thanks",4,"ngIf"],["id","form","novalidate","",1,"col-lg-7",3,"formGroup"],[1,"row"],[1,"mb-3","text-black"],["for","exampleInputProduct",1,"form-label"],["type","text","id","exampleInputProduct","formControlName","product",1,"form-control"],[1,"mb-3","col-sm-4","text-black"],["for","exampleInputName",1,"form-label"],["type","text","id","exampleInputName","formControlName","name",1,"form-control"],[4,"ngIf"],["for","exampleInputLastName",1,"form-label"],["type","text","id","exampleInputLastName","formControlName","lastName",1,"form-control"],["for","exampleInputPhone",1,"form-label"],["type","tel","id","exampleInputPhone","formControlName","phone",1,"form-control"],[1,"mb-3","col-sm-6","text-black"],["for","exampleInputCountry",1,"form-label"],["type","text","id","exampleInputCountry","formControlName","country",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","exampleInputIndex",1,"form-label"],["type","text","id","exampleInputIndex","formControlName","zip",1,"form-control"],["for","exampleInputAddress",1,"form-label"],["type","text","id","exampleInputAddress","formControlName","address",1,"form-control"],["for","exampleInputComment",1,"form-label"],["id","exampleInputComment","formControlName","comment",1,"form-control"],[1,"mt-3","text-black","d-flex","justify-content-between"],["id","button",1,"btn","btn-primary","px-4",3,"click","disabled"],["class","text-danger fs-3",4,"ngIf"],[1,"invalid-feedback"],[1,"text-danger","fs-3"],["id","thanks",1,"text-center","fs-3"]],template:function(r,d){r&1&&(i(0,"section",0)(1,"div",1)(2,"h2",2),l(3,"\u0421\u0434\u0435\u043B\u0430\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),n(),i(4,"div",3),p(5,se,44,9,"form",4)(6,fe,2,0,"div",5),n()()()),r&2&&(c(5),a("ngIf",!(d.isSuccess&&!d.hasError)),c(),a("ngIf",d.isSuccess&&!d.hasError))},dependencies:[D,V,z,M,P,R,G],styles:["input.ng-invalid.ng-dirty[_ngcontent-%COMP%], input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:red}.invalid-feedback[_ngcontent-%COMP%]{display:block}"]});let e=t;return e})();var _e=[{path:"",component:J}],y=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=E({type:t}),t.\u0275inj=g({imports:[x.forChild(_e),x]});let e=t;return e})();var De=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=E({type:t}),t.\u0275inj=g({imports:[q,x,L,y,Z,y]});let e=t;return e})();export{De as OrderModule};
