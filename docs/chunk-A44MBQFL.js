import{a as w,b as N,c as _}from"./chunk-WFXQO43C.js";import"./chunk-J3JAV6PN.js";import{$ as c,Aa as k,B as b,Ba as O,C as y,Ca as R,Ia as L,Ka as I,La as P,N as x,Na as g,O as o,P as d,V as j,X as p,_ as n,aa as f,ga as m,ka as a,la as h,ma as l,pa as D,qa as S,ra as M,s as F,sa as T,x as v}from"./chunk-BCLHCJ64.js";var V=e=>["/products",e];function $(e,t){if(e&1&&(n(0,"div",7)(1,"div",8),f(2,"img",9),n(3,"div",10)(4,"div")(5,"h5",11),a(6),c(),n(7,"p",12),a(8),M(9,"productDescription"),c()(),n(10,"div",13)(11,"a",14),a(12,"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435"),c(),n(13,"span",15),a(14),c()()()()()),e&2){let u=t.$implicit;o(2),m("src",u.image,x),m("alt",u.title),o(4),h(u.title),o(2),l(" ",T(9,6,u.description)," "),o(3),p("routerLink",S(8,V,u.id)),o(3),l("",u.price," \u0440\u0443\u0431.")}}function B(e,t){e&1&&(n(0,"div",16),a(1,"\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E"),c())}function G(e,t){e&1&&(n(0,"div",17),f(1,"div",18),c())}var z=(()=>{let t=class t{constructor(r,i){this.productService=r,this.router=i,this.products=[],this.subscription=null,this.subscriptionSearch=null,this.loading=!1,this.emptyProducts=!1,this.pageTitle="\u041D\u0430\u0448\u0438 \u0447\u0430\u0439\u043D\u044B\u0435 \u043A\u043E\u043B\u043B\u0435\u043A\u0446\u0438\u0438"}ngOnInit(){this.loading=!0,this.getProducts(this.productService.searchValue),this.getPageTitle(this.productService.searchValue),this.subscriptionSearch=this.productService.subjectSearch.subscribe(r=>{this.getPageTitle(r),this.getProducts(r)})}ngOnDestroy(){this.subscription?.unsubscribe(),this.subscriptionSearch?.unsubscribe()}getProducts(r){this.emptyProducts=!1,this.subscription=this.productService.getProducts(r).pipe(F(()=>{this.loading=!1})).subscribe({next:i=>{this.products=i,this.products.length===0&&(this.emptyProducts=!0)},error:i=>{console.log(i),this.router.navigate([""]).then()}})}getPageTitle(r){r?this.pageTitle=`\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u043F\u043E\u0438\u0441\u043A\u0430 \u043F\u043E \u0437\u0430\u043F\u0440\u043E\u0441\u0443 ${r}`:this.pageTitle="\u041D\u0430\u0448\u0438 \u0447\u0430\u0439\u043D\u044B\u0435 \u043A\u043E\u043B\u043B\u0435\u043A\u0446\u0438\u0438"}};t.\u0275fac=function(i){return new(i||t)(d(w),d(I))},t.\u0275cmp=b({type:t,selectors:[["app-products"]],decls:8,vars:4,consts:[[1,"products","py-3"],[1,"container"],[1,"fw-bold","text-center","my-1"],[1,"row","row-cols-1","row-cols-md-2","row-cols-lg-3","row-gap-4","mt-5"],["class","col",4,"ngFor","ngForOf"],["class","text-center fs-2",4,"ngIf"],["class","w-100 h-100 position-fixed z-3 top-0 start-0 d-flex align-items-center justify-content-center bg-black bg-opacity-50",4,"ngIf"],[1,"col"],[1,"card","p-0","h-100","border","border-secondary-subtle"],[1,"card-img-top","w-75","mx-auto",3,"src","alt"],[1,"card-body","d-flex","flex-column","justify-content-between"],[1,"card-title","mt-1"],[1,"card-text","mt-1"],[1,"d-flex","justify-content-between","align-items-center","mt-2","mb-1"],[1,"btn","btn-primary",3,"routerLink"],[1,"fs-3"],[1,"text-center","fs-2"],[1,"w-100","h-100","position-fixed","z-3","top-0","start-0","d-flex","align-items-center","justify-content-center","bg-black","bg-opacity-50"],[1,"loader"]],template:function(i,s){i&1&&(n(0,"section",0)(1,"div",1)(2,"h2",2),a(3),c(),n(4,"div",3),j(5,$,15,10,"div",4),c(),j(6,B,2,0,"div",5)(7,G,2,0,"div",6),c()()),i&2&&(o(3),h(s.pageTitle),o(2),p("ngForOf",s.products),o(),p("ngIf",s.emptyProducts),o(),p("ngIf",s.loading))},dependencies:[k,O,P,N],styles:[".loader[_ngcontent-%COMP%]{border:10px solid #0d6efd;border-top:10px solid white;border-radius:50%;width:120px;height:120px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]});let e=t;return e})();var H=()=>["/order"],J=e=>({product:e}),q=(()=>{let t=class t{constructor(r,i,s){this.activatedRoute=r,this.productService=i,this.router=s,this.product={id:0,image:"",title:"",price:0,description:""}}ngOnInit(){this.activatedRoute.params.subscribe(r=>{r.id&&this.productService.getProduct(+r.id).subscribe({next:i=>{this.product=i},error:()=>{this.router.navigate(["/"]).then()}})})}};t.\u0275fac=function(i){return new(i||t)(d(L),d(w),d(I))},t.\u0275cmp=b({type:t,selectors:[["app-product"]],decls:17,vars:10,consts:[[1,"products","py-3"],[1,"container"],[1,"row","mt-5","justify-content-center"],[1,"col-8"],[1,"card","p-0","h-100","border","border-secondary-subtle"],[1,"card-img-top","w-50","mx-auto",3,"src","alt"],[1,"card-body","d-flex","flex-column","justify-content-between"],[1,"card-title","mt-1"],[1,"card-text","mt-1"],[1,"d-flex","justify-content-between","align-items-center","mt-4","mb-1"],[1,"btn","btn-primary","px-5",3,"routerLink","queryParams"],[1,"fs-3"]],template:function(i,s){i&1&&(n(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),f(5,"img",5),n(6,"div",6)(7,"div")(8,"h5",7),a(9),c(),n(10,"p",8),a(11),c()(),n(12,"div",9)(13,"a",10),a(14,"\u041A\u0443\u043F\u0438\u0442\u044C"),c(),n(15,"span",11),a(16),c()()()()()()()()),i&2&&(o(5),m("src",s.product.image,x),m("alt",s.product.title),o(4),h(s.product.title),o(2),l(" ",s.product.description," "),o(2),p("routerLink",D(7,H))("queryParams",S(8,J,s.product.title)),o(3),l("",s.product.price," \u0440\u0443\u0431."))},dependencies:[P]});let e=t;return e})();var K=[{path:"",component:z},{path:":id",component:q}],E=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=y({type:t}),t.\u0275inj=v({imports:[g.forChild(K),g]});let e=t;return e})();var mt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=y({type:t}),t.\u0275inj=v({imports:[R,g,_,E,E]});let e=t;return e})();export{mt as ProductsModule};
